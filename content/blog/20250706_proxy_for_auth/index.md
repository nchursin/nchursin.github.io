---
title: '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏'
date: Sun, 06 Jul 2025 11:00:00 +0000
featured: true
draft: false
tags: [authentication, authorization, proxy, hackerman]
---
–ù–µ–¥–∞–≤–Ω–æ —É –Ω–∞—Å –Ω–∞ —Ä–∞–±–æ—Ç–µ –∑–∞–≤–µ–∑–ª–∏ –ª–æ–∫–∞–ª—å–Ω—É—é LLM'–∫—É —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ –ø—Ä–µ–º—É–¥—Ä–æ—Å—Ç—è–º–∏. –°—Ä–µ–¥–∏ –ø—Ä–æ—á–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞–º –µ—Å—Ç—å RAG'–∏. –î–ª—è —Ç–µ—Ö, –∫—Ç–æ –µ—â—ë –Ω–µ –ø—Ä–µ–∏—Å–ø–æ–ª–Ω–∏–ª—Å—è: RAG ‚Äî retrieval augmented generation, —Ç–æ –µ—Å—Ç—å —Ç–∞–∫–∞—è —Ñ–∏–≥–Ω—è, –≥–¥–µ LLM'–∫–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–æ–Ω–∏—Ç —à–∏–∑—É, –∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –µ–π –±–æ–ª—å—à–æ–π –∫—É—Å–æ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ –≤—ã –µ–π —Å–∫–æ—Ä–º–∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, wiki –ø–æ¬†[aichat](https://github.com/sigoden/aichat)¬†(üåö), —Ç–æ –æ–Ω–∞ –±—É–¥–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞—Ç—å, –∞ –∏—Å–∫–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –≤ —ç—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–µ, –ø–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∏–ª —Ç—É—Ç –∂–µ —Å–∫–æ—Ä–º–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–º—É –±–æ–ª–≤–∞–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–∑ –Ω–∞—à–µ–≥–æ Confluence Data Center. –ù–æ –º–µ–Ω—è –∂–¥–∞–ª–æ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ: –¥–∞–∂–µ —á–µ—Ä–µ–∑ VPN –Ω–∞—à–∞ –∫–æ–Ω—Ñ–ª—é—Ö–∞ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Äî –Ω–µ–ª—å–∑—è –¥–∞–∂–µ —á–∏—Ç–∞—Ç—å.

–Ø —É–∂–µ –ø–∏—Å–∞–ª, —á—Ç–æ –ø—Ä–µ–∏—Å–ø–æ–ª–Ω–∏–ª—Å—è –Ω–µ–Ω–∞–≤–∏—Å—Ç–∏ –∏ –∑–Ω–∞–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ Confluence. –ò –≤–æ—Ç –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è —É–ø–æ—Ç—Ä–µ–±–∏—Ç—å –∏—Ö –Ω–∞ –±–ª–∞–≥–æ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ (–æ–∑–æ–Ω–µ—á–µ—Å—Ç–≤–∞) –∏ –Ω–∞—É—á–∏—Ç—å aichat –≤—ã—Å–∞—Å—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª—é—Ö—É —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

–î–ª—è —ç—Ç–æ–≥–æ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å:
1. –û–¥–∏–Ω aichat
2. –û–¥–∏–Ω mitmproxy
3. –û–¥–∏–Ω –ø–∏—Ç–æ–Ω—è—á–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞ 3 —Å—Ç—Ä–æ–∫–∏
4. –û–¥–∏–Ω –≤–µ—á–µ—Ä

–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ö–µ–¥–µ—Ä—É, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω—å–∫–∞ (–≤ –º–æ—ë–º —Å–ª—É—á–∞–µ aichat) –Ω–µ –º–æ–∂–µ—Ç –≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é. –í–¥—Ä—É–≥ –∫–æ–º—É –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è.
1. –°—Ç–∞–≤–∏–º¬†`mitmproxy`. –ó–Ω–∞–µ—Ç–µ –ø—Ä–æ –∞—Ç–∞–∫—É man-in-the-middle? –í–æ—Ç —ç—Ç–æ –æ–Ω–æ. –≠—Ç–∞ —à—Ç—É–∫–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Ö. –ü–æ—á—É–≤—Å—Ç–≤—É–π —Å–µ–±—è hackerman'–æ–º.
2. –°—Ç–∞–≤–∏–º¬†[—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç](https://docs.mitmproxy.org/stable/concepts/certificates/), —á—Ç–æ–±—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª HTTPS –≤¬†`mitmproxy`. –ú–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –∑–∞–≤–æ–¥–∏—Ç—å Firefox —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å—é, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ö—Ä–æ–º –Ω–µ —Å–º–æ–≥ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å.
3. –ü–∏–ª–∏–º –≤–æ—Ç —Ç–∞–∫–æ–π (–ø–æ–¥–æ–±–Ω—ã–π) –ø–∏—Ç–æ–Ω—è—á–∏–π —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä,¬†`add_authorization_header.py`:
```python
def request(flow):
   if flow.request.pretty_host == 'confluence.mydomain.ru':  # –º–µ–Ω—è–π —É—Ä–ª—É –Ω–∞ –Ω—É–∂–Ω—É—é —Ç–µ–±–µ
       flow.request.headers['Authorization'] = 'Bearer <token>'  # –º–µ–Ω—è–π –º–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```
4. –ó–∞–ø—É—Å–∫–∞–µ–º mitmproxy:¬†`mitmproxy -s add_authorization_header.py`

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑¬†`http://127.0.0.1:8080`¬†‚Äî –∏ –≤—ã –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã!
